# Object Tracking Home assignment - REPORT

### Постановка задачи

Реализуйте методы tracker_soft и tracker_strong в скрипте fastapi_server.py,
придумайте, обоснуйте и реализуйте метод для оценки качества разработанных трекеров.
Сравните результаты tracker_soft и tracker_strong для 5, 10, 20 объектов и различных 
значений random_range и bb_skip_percent
(информацию о генерации данных читай в пункте "Тестирование"). Напишите отчёт. 
В отчете необходимо в свободном стиле привести описание методов tracker_soft, 
tracker_strong, метода оценки качества трекеров, привести сравнительную таблицу 
реализованных трекеров, сделать вывод.  
Бонусом можете выписать найденные баги в текущем проекте.

### Краткое описание софт трекера (hard не строил)
Трекер представляет собой модель для отслеживания объектов в видеокадрах,
основанную на распознавании и сопоставлении рамок или областей, 
где обнаружены объекты (например, улыбки). Вот основные принципы его работы:

1. **Инициализация**: При создании модели она настраивается с некоторыми параметрами, такими как порог для оценки перекрытия рамок (IOU) и минимальное расстояние для сопоставления объектов.
2. **Обработка каждого кадра**:
   - Первый кадр: На первом кадре модель инициализирует каждый обнаруженный объект с уникальной меткой.
   - Следующие кадры: Для каждого нового кадра модель сравнивает текущие рамки с предыдущими. Она использует алгоритм венгерского метода, который основан на значениях IOU между старыми и новыми рамками, чтобы понять, какие рамки соответствуют друг другу.
3. **Сопоставление рамок**:
   - Если рамка из нового кадра хорошо совпадает с предыдущей по IOU, они считаются одним и тем же объектом.
   - Если для рамки не находится соответствия, то проверяется Евклидово расстояние до других рамок. Если оно меньше заданного порога, рамки также считаются сопоставленными.
   - Рамки, для которых не найдено соответствий, получают новые метки, что означает обнаружение новых объектов.
4. **Обновление данных**: Все обновления данных о рамках и метках сохраняются для использования в следующем кадре.

### Краткое описание используемой метрики качества трекера
Метрика оценивает работу системы трекинга объектов, определяя, насколько точно система может 
последовательно идентифицировать одни и те же объекты на протяжении серии видеокадров. 
В основе его работы — сравнение меток, присвоенных объектам системой трекинга, с их истинными метками,
 и вычисление общей точности этого сопоставления.

Принцип работы можно разложить на три основных шага:

- **Сбор данных**: Каждый раз, когда система трекинга делает предсказание о местоположении объекта на кадре, эта информация записывается. Записывается, какой объект был где обнаружен.
- **Анализ сопоставления**: Из всех данных выделяется, какие метки были наиболее часто присвоены каждому объекту. Это позволяет определить предпочтительную метку для каждого объекта, которая считается "правильной".
- **Вычисление точности**: Для каждого объекта подсчитывается, как часто система присваивала ему правильную метку. Отношение правильных сопоставлений ко всем случаям, где объект был идентифицирован, дает меру точности. Среднее значение по всем объектам показывает общую точность системы трекинга.


### Сравнение результатов софт трекера для различных конфигураций
| tracks_amount | random_range | bb_skip_percent | Metric |
|---------------|--------------|-----------------|--------|
| 5 | 10 | 0.5 | 0.433  |
| 5 | 10 | 0.25 | 0.548  |
| 5 | 20 | 0.5 | 0.159  |
| 5 | 20 | 0.25 | 0.278  |
| 10 | 10 | 0.5 | 0.35   |
| 10 | 10 | 0.25 | 0.115  |
| 10 | 20 | 0.5 | 0.092  |
| 10 | 20 | 0.25 | 0.2    |
| 20 | 10 | 0.5 | 0.237  |
| 20 | 10 | 0.25 | 0.123  |
| 20 | 20 | 0.5 | 0.125  |
| 20 | 20 | 0.25 | 0.13   |
Наибольшее значение метрики наблюдается для 5 объектов, смещения рамки на 10 пикселей и вероятности
не найти объекты в детектором 0.25. Это ожидаемый результат - кастомная метрика увеличивается при:
 - Уменьшении количества объектов (легче отследить объекты, нет перекрытий)
 - Уменьшении смещения рамки
 - Уменьшении вероятности ненахождения объекта на фрейме

